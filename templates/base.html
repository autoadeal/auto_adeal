<!DOCTYPE html>
<html lang="sq">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- Dynamic Title -->
    <title>{% block title %}Auto Adeal - Aksesore dhe Pjese per Makina{% endblock %}</title>
    
    <!-- Dynamic Meta Description -->
    <meta name="description" content="{% block description %}Blej pjese dhe aksesore per makina online ne Shqiperi dhe Kosove.{% endblock %}">
    
    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="/static/favicon/favicon.ico">
    <link rel="icon" type="image/png" sizes="32x32" href="/static/favicon/favicon-32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/static/favicon/favicon-16.png">
    
    <script src="https://cdn.tailwindcss.com"></script>
    
    <style>
        @media (max-width: 767px) {
            input[type="text"],
            input[type="email"],
            input[type="password"],
            select,
            textarea {
                font-size: 16px !important;
            }
        }
        
        /* Scroll to Top Button Styles */
        #scroll-to-top-btn {
            position: fixed;
            bottom: 20px;
            right: 20px;
            width: 50px;
            height: 50px;
            background: #dc2626;
            color: white;
            border: none;
            border-radius: 50%;
            cursor: pointer;
            z-index: 999999;
            box-shadow: 0 4px 12px rgba(220, 38, 38, 0.4);
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 0;
            visibility: hidden;
            transform: scale(0.8);
            transition: opacity 0.3s ease, transform 0.3s ease, visibility 0.3s;
            pointer-events: none;
        }

        #scroll-to-top-btn.visible {
            opacity: 1;
            visibility: visible;
            transform: scale(1);
            pointer-events: auto;
        }

        #scroll-to-top-btn:hover {
            background: #b91c1c;
            transform: scale(1.1);
        }

        @media (max-width: 767px) {
            #scroll-to-top-btn {
                width: 60px;
                height: 60px;
                bottom: 20px;
                right: 15px;
            }
        }
        
        {% block extra_styles %}{% endblock %}
    </style>
</head>
<body class="{% block body_class %}bg-gray-50{% endblock %}">
    <!-- Header -->
    <header class="bg-black text-white py-3 md:py-4">
        <div class="container mx-auto px-4 md:px-6">
            <!-- Mobile Layout -->
            <div class="md:hidden">
                <div class="flex items-center justify-between mb-3">
                    <button onclick="window.location.href='/'" class="text-white mr-3">
                        <svg xmlns="http://www.w3.org/2000/svg" class="w-6 h-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M4 6h16M4 12h16M4 18h16"/>
                        </svg>
                    </button>
                    
                    <a href="/" class="flex items-center flex-1 h-8">
                        <img src="/static/logo.png" alt="Logo" class="h-full w-auto object-contain">
                    </a>
                    
                    <div class="flex items-center space-x-4">
                        <div class="relative">
                            <button id="account-button-mobile" onclick="toggleAccountDropdown()" class="flex items-center text-white">
                                <svg xmlns="http://www.w3.org/2000/svg" class="w-6 h-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                                    <path stroke-linecap="round" stroke-linejoin="round" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"/>
                                </svg>
                            </button>
                            
                            <div id="account-dropdown-mobile" class="hidden absolute right-0 w-48 bg-white rounded-lg shadow-xl py-2" style="top: calc(100% + 8px); z-index: 300;">
                                <div id="logged-out-options-mobile">
                                    <button onclick="showLoginModal(); closeAccountDropdown();" class="w-full text-left px-4 py-2 text-sm text-black hover:bg-gray-100 transition-colors">
                                        Hyr
                                    </button>
                                    <button onclick="showSignupModal(); closeAccountDropdown();" class="w-full text-left px-4 py-2 text-sm text-black hover:bg-gray-100 transition-colors">
                                        Regjistrohu
                                    </button>
                                </div>
                                
                                <div id="logged-in-options-mobile" class="hidden">
                                    <div class="px-4 py-2 border-b border-gray-200">
                                        <p id="dropdown-user-name-mobile" class="font-semibold text-black text-sm"></p>
                                        <p id="dropdown-user-email-mobile" class="text-xs text-gray-600 truncate"></p>
                                    </div>
                                    <button onclick="window.location.href='/order-tracking';" class="w-full text-left px-4 py-2 text-sm text-black hover:bg-gray-100 transition-colors">
                                        Porositë e Mia
                                    </button>
                                    <button onclick="logout(); closeAccountDropdown();" class="w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-gray-100 transition-colors">
                                        Dil
                                    </button>
                                </div>
                            </div>
                        </div>
                        
                        <a href="/wishlist" class="relative">
                            <svg xmlns="http://www.w3.org/2000/svg" class="w-6 h-6 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2.5">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"/>
                            </svg>
                            <span id="wishlist-count-mobile" class="absolute -top-2 -right-2 bg-red-600 text-white rounded-full w-5 h-5 text-xs flex items-center justify-center">0</span>
                        </a>
                        
                        <a href="/cart" class="relative">
                            <svg xmlns="http://www.w3.org/2000/svg" class="w-6 h-6 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2.5">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-1.2 6h12.8M10 19a1 1 0 11-2 0 1 1 0 012 0zm8 0a1 1 0 11-2 0 1 1 0 012 0z"/>
                            </svg>
                            <span id="cart-count-mobile" class="absolute -top-2 -right-2 bg-red-600 text-white rounded-full w-5 h-5 text-xs flex items-center justify-center">0</span>
                        </a>
                    </div>
                </div>
                
                <form action="/search" method="GET" class="flex">
                    <input type="text" name="q" placeholder="Kërko..." class="flex-1 px-4 py-2 rounded-l-full text-black focus:outline-none text-sm">
                    <button type="submit" class="bg-red-600 hover:bg-red-700 px-4 py-2 rounded-r-full transition-colors">
                        <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="3">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M21 21l-4.35-4.35m1.6-5.65a7 7 0 11-14 0 7 7 0 0114 0z"/>
                        </svg>
                    </button>
                </form>
            </div>
            
            <!-- Desktop Layout -->
            <div class="hidden md:flex items-center justify-between">
                <div class="flex items-center ml-8">
                    <a href="/" class="flex items-center hover:opacity-80 transition-opacity">
                        <img src="/static/logo.png" alt="Logo" class="h-12 md:h-14 w-auto max-w-[250px] object-contain">
                    </a>
                </div>
                
                <div class="flex-1 max-w-md mx-8">
                    <form action="/search" method="GET" class="flex">
                        <input type="text" name="q" placeholder="Kërko..." class="flex-1 px-4 py-2 rounded-l-full text-black focus:outline-none">
                        <button type="submit" class="bg-red-600 hover:bg-red-700 pl-6 pr-7 py-2 rounded-r-full transition-colors flex items-center">
                            <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="3">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M21 21l-4.35-4.35m1.6-5.65a7 7 0 11-14 0 7 7 0 0114 0z"/>
                            </svg>
                        </button>
                    </form>
                </div>
                
                <div class="flex items-center space-x-6">
                    <div class="relative">
                        <button id="account-button" onclick="toggleAccountDropdown()" class="flex items-center space-x-2 text-white hover:text-red-500 transition-colors">
                            <svg xmlns="http://www.w3.org/2000/svg" class="w-6 h-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"/>
                            </svg>
                            <span id="account-label">Llogaria</span>
                            <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                                <path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7"/>
                            </svg>
                        </button>
                        
                        <div id="account-dropdown" class="hidden absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-lg py-2 z-[110]">
                            <div id="logged-out-options">
                                <button onclick="showLoginModal(); closeAccountDropdown();" class="w-full text-left px-4 py-2 text-sm text-black hover:bg-gray-100 transition-colors">
                                    Hyr
                                </button>
                                <button onclick="showSignupModal(); closeAccountDropdown();" class="w-full text-left px-4 py-2 text-sm text-black hover:bg-gray-100 transition-colors">
                                    Regjistrohu
                                </button>
                            </div>
                            
                            <div id="logged-in-options" class="hidden">
                                <div class="px-4 py-2 border-b border-gray-200">
                                    <p id="dropdown-user-name" class="font-semibold text-black text-sm"></p>
                                    <p id="dropdown-user-email" class="text-xs text-gray-600 truncate"></p>
                                </div>
                                <button onclick="window.location.href='/order-tracking';" class="w-full text-left px-4 py-2 text-sm text-black hover:bg-gray-100 transition-colors">
                                    Porositë e Mia
                                </button>
                                <button onclick="logout(); closeAccountDropdown();" class="w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-gray-100 transition-colors">
                                    Dil
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <a href="/wishlist" class="relative hover:text-red-500 transition-colors">
                        <svg xmlns="http://www.w3.org/2000/svg" class="w-6 h-6 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2.5">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"/>
                        </svg>
                        <span id="wishlist-count" class="absolute -top-2 -right-2 bg-red-600 text-white rounded-full w-5 h-5 text-xs flex items-center justify-center">0</span>
                    </a>
                    
                    <a href="/cart" class="relative hover:text-red-500 transition-colors">
                        <svg xmlns="http://www.w3.org/2000/svg" class="w-6 h-6 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2.5">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-1.2 6h12.8M10 19a1 1 0 11-2 0 1 1 0 012 0zm8 0a1 1 0 11-2 0 1 1 0 012 0z"/>
                        </svg>
                        <span id="cart-count" class="absolute -top-2 -right-2 bg-red-600 text-white rounded-full w-5 h-5 text-xs flex items-center justify-center">0</span>
                    </a>
                </div>
            </div>
        </div>
    </header>

    <!-- Navigation Bar -->
    <nav class="bg-white border-b border-gray-200 py-4">
        <div class="container mx-auto px-4 md:px-6">
            <div class="flex justify-center space-x-6 md:space-x-24 overflow-x-auto">
                <a href="/" class="text-black hover:text-red-600 font-medium transition-colors text-sm whitespace-nowrap">Kryefaqja</a>
                <a href="/special-offers" class="text-black hover:text-red-600 font-medium transition-colors text-sm whitespace-nowrap">Oferta</a>
                <a href="/brands" class="text-black hover:text-red-600 font-medium transition-colors text-sm whitespace-nowrap">Marka</a>
                <a href="/contact" class="text-black hover:text-red-600 font-medium transition-colors text-sm whitespace-nowrap">Na Kontaktoni</a>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    {% block content %}{% endblock %}

    <!-- Footer -->
    <footer class="bg-black text-white py-8 md:py-12 mt-auto">
        <div class="container mx-auto px-4 md:px-6 max-w-7xl">
            <div class="hidden md:flex flex-col items-center justify-center gap-8">
                <div class="flex-shrink-0">
                    <img src="/static/logo.png" alt="Auto Adeal" class="h-20 w-auto" onerror="this.style.display='none'">
                </div>
                
                <div class="grid grid-cols-3 gap-x-16 gap-y-4 text-center text-sm">
                    <div class="space-y-3">
                        <a href="/privacy-policy" class="block hover:text-red-400 transition-colors">Privacy Policy</a>
                        <a href="/terms-conditions" class="block hover:text-red-400 transition-colors">Terms & Conditions</a>
                    </div>
                    
                    <div class="space-y-3">
                        <a href="/blog" class="block hover:text-red-400 transition-colors">Blog</a>
                        <a href="/refund-policy" class="block hover:text-red-400 transition-colors">Refund & Shipping</a>
                    </div>
                    
                    <div class="space-y-3">
                        <a href="/about" class="block hover:text-red-400 transition-colors">About Us</a>
                        <a href="/contact" class="block hover:text-red-400 transition-colors">Contact Us</a>
                    </div>
                </div>
            </div>
            
            <div class="md:hidden">
                <div class="grid grid-cols-2 gap-x-8 gap-y-3 text-center text-sm">
                    <a href="/privacy-policy" class="hover:text-red-400 transition-colors">Privacy Policy</a>
                    <a href="/terms-conditions" class="hover:text-red-400 transition-colors">Terms & Conditions</a>
                    <a href="/blog" class="hover:text-red-400 transition-colors">Blog</a>
                    <a href="/refund-policy" class="hover:text-red-400 transition-colors">Refund & Shipping</a>
                    <a href="/about" class="hover:text-red-400 transition-colors">About Us</a>
                    <a href="/contact" class="hover:text-red-400 transition-colors">Contact Us</a>
                </div>
            </div>
            
            <div class="text-center mt-8 pt-4 border-t border-gray-700 text-xs text-gray-400">
                <p>&copy; 2025 Auto Adeal. Të gjitha të drejtat e rezervuara.</p>
            </div>
        </div>
    </footer>

    <!-- Scroll to Top Button -->
    <button id="scroll-to-top-btn" type="button" aria-label="Scroll to top">
        <svg xmlns="http://www.w3.org/2000/svg" class="w-6 h-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="3">
            <path stroke-linecap="round" stroke-linejoin="round" d="M5 15l7-7 7 7"/>
        </svg>
    </button>

    <!-- Login/Signup Modal -->
    <div id="auth-modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[300]" style="display: none;">
        <div class="bg-white rounded-lg p-8 max-w-md w-full mx-4">
            <div class="flex justify-between items-center mb-6">
                <h2 id="auth-title" class="text-2xl font-bold text-black">Hyr</h2>
                <button onclick="closeAuthModal()" class="text-gray-500 hover:text-gray-700 text-2xl">×</button>
            </div>
            
            <form id="login-form" onsubmit="handleLogin(event)">
                <div class="space-y-4">
                    <input type="email" id="login-email" placeholder="Email" required class="w-full px-4 py-2 border border-gray-300 rounded text-black">
                    <input type="password" id="login-password" placeholder="Password" required class="w-full px-4 py-2 border border-gray-300 rounded text-black">
                    <button type="submit" class="w-full bg-red-600 text-white py-2 rounded hover:bg-red-700 transition-colors">Hyr</button>
                </div>
                <div class="mt-4 text-center">
                    <button type="button" onclick="showForgotPassword()" class="text-red-600 hover:text-red-700 text-sm">Ke harruar fjalëkalimin?</button>
                </div>
                <div class="mt-4 text-center">
                    <button type="button" onclick="showSignupForm()" class="text-gray-600 hover:text-gray-800">Nuk ke llogari? Regjistrohu</button>
                </div>
            </form>
            
            <form id="signup-form" onsubmit="handleSignup(event)" style="display: none;">
                <div class="space-y-4">
                    <input type="text" id="signup-name" placeholder="Emri" required class="w-full px-4 py-2 border border-gray-300 rounded text-black">
                    <input type="text" id="signup-surname" placeholder="Mbiemri" required class="w-full px-4 py-2 border border-gray-300 rounded text-black">
                    <input type="email" id="signup-email" placeholder="Email" required class="w-full px-4 py-2 border border-gray-300 rounded text-black">
                    <input type="password" id="signup-password" placeholder="Password" required class="w-full px-4 py-2 border border-gray-300 rounded text-black">
                    <button type="submit" class="w-full bg-red-600 text-white py-2 rounded hover:bg-red-700 transition-colors">Regjistrohu</button>
                </div>
                <div class="mt-4 text-center">
                    <button type="button" onclick="showLoginForm()" class="text-gray-600 hover:text-gray-800">Ke një llogari? Hyr</button>
                </div>
            </form>
            
            <form id="forgot-form" onsubmit="handleForgotPassword(event)" style="display: none;">
                <div class="space-y-4">
                    <p class="text-gray-600 text-sm">Shkruaj emailin tënd për të marrë udhëzimet e rikuperimit të fjalëkalimit.</p>
                    <input type="email" id="forgot-email" placeholder="Email" required class="w-full px-4 py-2 border border-gray-300 rounded text-black">
                    <button type="submit" class="w-full bg-red-600 text-white py-2 rounded hover:bg-red-700 transition-colors">Dërgo emailin e rikuperimit</button>
                </div>
                <div class="mt-4 text-center">
                    <button type="button" onclick="showLoginForm()" class="text-gray-600 hover:text-gray-800">← Kthehu te hyrja</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Base JavaScript -->
    <script src="/static/js/base.js"></script>
    
    <!-- Page-specific JavaScript -->
    {% block extra_scripts %}{% endblock %}
</body>
</html>